# Template file for 'heroic-games-launcher'
pkgname=heroic-games-launcher
version=2.6.1
revision=1
archs="x86_64"
hostmakedepends="nodejs python3 yarn"
depends="fuse gawk"
checkdepends="tar xz"
short_desc="Open Source Launcher for GOG and Epic Games"
maintainer="Wiktor Ciurej <wiktor.ciurej@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/Heroic-Games-Launcher/HeroicGamesLauncher"
distfiles="https://github.com/Heroic-Games-Launcher/HeroicGamesLauncher/archive/v${version}.tar.gz"
checksum=d312ae93a63029491bf23eb52074580e4a1830d030b70f9547fd9b187306f8aa
nopie_files="/opt/heroic/resources/app.asar.unpacked/build/bin/linux/gogdl
	/opt/heroic/resources/app.asar.unpacked/build/bin/linux/legendary"

do_build() {
	yarn
	yarn dist:linux tar.xz
}
do_check() {
	yarn test
	yarn test:ci
}
do_install() {
	vmkdir opt/heroic
	vcopy dist/linux-unpacked/* opt/heroic
	vinstall public/icon.png 644 usr/share/pixmaps heroic.png
	vinstall ${FILESDIR}/heroic.desktop 644 usr/share/applications
}
