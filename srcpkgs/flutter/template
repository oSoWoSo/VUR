# Template file for 'flutter'
pkgname=flutter
version=2.8.1
revision=1
#archs="i686 x86_64"
wrksrc=${pkgname}-${version}
#create_wrksrc=yes
build_style=gnu-configure
#configure_args=""
#make_build_args=""
#make_install_args=""
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends=""
makedepends="python"
depends="git glu java-environment libglvnd unzip"
short_desc="A new mobile app SDK to help developers and designers build modern mobile apps for iOS and Android."
maintainer="zenobit <pm@osowoso.xyz>"
license="GPL-3.0-or-later"
homepage="https://flutter.dev/"
distfiles="https://storage.googleapis.com/${pkgname}_infra_release/releases/stable/linux/${pkgname}_linux_${version}-stable.tar.xz"
checksum=47ecdcc5481c51a8fb323f154f8044cb309d55fa8614a97c89bc7c08e43abe01

build() {
  cd "${srcdir}/${pkgname}"
  "${srcdir}/${pkgname}/bin/${pkgname}" doctor
}

package() {
  rm -rf "${srcdir}/${pkgname}/bin/cache" "${srcdir}/${pkgname}/.pub-cache"
  install -Dm644 "${srcdir}/${pkgname}/LICENSE" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
  install -Dm755 "${srcdir}/${pkgname}.sh" "${pkgdir}/etc/profile.d/${pkgname}.sh"
  install -Dm755 "${srcdir}/${pkgname}.csh" "${pkgdir}/etc/profile.d/${pkgname}.csh"
  install -dm755 "${pkgdir}/opt/${pkgname}"
  install -dm755 "${pkgdir}/usr/bin"
  cp -ra "${srcdir}/${pkgname}" "${pkgdir}/opt/"
  find "${pkgdir}/opt/${pkgname}" -type d -exec chmod a+rx {} +
  find "${pkgdir}/opt/${pkgname}" -type f -exec chmod a+r {} +
  chmod a+rw "${pkgdir}/opt/${pkgname}/version"
  ln -s "/opt/${pkgname}/bin/${pkgname}" "${pkgdir}/usr/bin/${pkgname}"
}