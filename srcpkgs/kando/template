# Template file for 'kando'
pkgname=kando
version=2.2.0
#version=2.1.2
revision=1
_alpha="-alpha.1"
archs="x86_64* aarch64*"
build_helper="qemu"
hostmakedepends="pkg-config nodejs cmake wayland-devel"
makedepends="libX11-devel libXtst-devel libxkbcommon-devel wayland-devel"
depends="electron35"
short_desc="Do things with utmost efficiency"
maintainer="zenobit <zenobit@disroot.org>"
license="MIT"
homepage="https://kando.menu"
changelog="https://raw.githubusercontent.com/kando-menu/kando/refs/heads/main/docs/changelog.md"
#distfiles="https://github.com/kando-menu/kando/archive/refs/tags/v${version}.tar.gz"
distfiles="https://github.com/kando-menu/kando/archive/refs/tags/v${version}${_alpha}.tar.gz"
checksum=c9b08569bc7d95d4a5cb9d2ef913dc6053f73596824f467414830362561ef145
nocross=yes

do_build() {
	export NPM_CONFIG_LOGLEVEL=error
	npm install --no-audit --no-fund
	npm run package
}

do_install() {
	vmkdir usr/lib/kando
	vcopy ".webpack" usr/lib/kando/
	vinstall package.json 644 usr/lib/kando
}

post_install() {
	vbin "${FILESDIR}/kando"
	vinstall assets/icons/icon.svg 644 usr/share/icons/hicolor/scalable/apps kando.svg
	vinstall assets/icons/square-icon.svg 644 usr/share/icons/hicolor/scalable/apps kando-square.svg
	vinstall "${FILESDIR}/kando.desktop" 644 usr/share/applications
	vlicense LICENSE.md
}
