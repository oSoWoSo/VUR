# Template file for 'cross-mips-linux-muslhf'
_binutils_version=2.41
_gcc_version=13.2.0
_musl_version=1.1.24
_linux_version=5.10.4
pkgname=cross-mips-linux-muslhf
version=0.36
revision=1
build_style=void-cross
configure_args="--with-arch=mips32r2 --with-float=hard
 --with-linker-hash-style=sysv --enable-autolink-libatomic"
hostmakedepends="texinfo tar gcc-objc flex perl python3 pkg-config"
makedepends="isl-devel libmpc-devel gmp-devel mpfr-devel
 zlib-devel libzstd-devel"
depends="${pkgname}-libc-${version}_${revision}"
short_desc="Void cross toolchain for ${pkgname/cross-}"
maintainer="hipperson0 <hipperson0@gmail.com>"
license="GPL-2.0-or-later, GPL-3.0-or-later, MIT"
homepage="https://www.voidlinux.org/"
distfiles="
 ${GNU_SITE}/binutils/binutils-${_binutils_version}.tar.xz
 ${GNU_SITE}/gcc/gcc-${_gcc_version}/gcc-${_gcc_version}.tar.xz
 https://musl.libc.org/releases/musl-${_musl_version}.tar.gz
 ${KERNEL_SITE}/kernel/v5.x/linux-${_linux_version}.tar.xz"
checksum="ae9a5789e23459e59606e6714723f2d3ffc31c03174191ef0d015bdf06007450
 e275e76442a6067341a27f04c5c6b83d8613144004c0413528863dc6b5c743da
 1370c9a812b2cf2a7d92802510cca0058cc37e66a7bedd70051f0a34015022a3
 904e396c26e9992a16cd1cc989460171536bed7739bf36049f6eb020ee5d56ec"
nocross=yes

cross_gcc_skip_go=yes
cross_binutils_configure_args="--enable-default-hash-style=sysv"
cross_musl_cflags="-Os -march=mips32r2 -mhard-float"

cross-mips-linux-muslhf-libc_package() {
	short_desc+=" - libc files"
	nostrip=yes
	noverifyrdeps=yes
	noshlibprovides=yes

	pkg_install() {
		vmove usr/${sourcepkg/cross-}
	}
}
