# Template file for 'nyxt-pre'
pkgname=nyxt-pre
version=4.0.0.13
revision=1
create_wrksrc=yes
build_style=gnu-makefile
make_build_target=all
hostmakedepends="sbcl git pkg-config"
makedepends="libwebkit2gtk41 libfixposix-devel libgirepository openssl-devel"
depends="dbus xclip enchant2 libwebkit2gtk41 libfixposix libgirepository"
short_desc="Keyboard-oriented, extensible web-browser"
maintainer="Orphaned <orphan@voidlinux.org>"
license="BSD-3-Clause"
homepage="https://nyxt.atlas.engineer/"
distfiles="https://github.com/atlas-engineer/nyxt/archive/refs/tags/4.0.0-pre-release-13.tar.gz"
# 3.12.0 "https://github.com/atlas-engineer/nyxt/releases/download/${version}/nyxt-${version}-source-with-submodules.tar.xz"
checksum=c6c627fbd9f48b9106b51ede67764426d66863db240a7f1bd20e6a61fe49686c
make_check=no # Disable check because ASDF/USER::PROVE is not installed
nostrip=yes
nopie=yes
nocross="Cross-compilation fails due to package iolib/syscalls setting incorrect compiler flags"
shlib_requires="libwebkit2gtk-4.1.so.0 libfixposix.so.3 libgirepository-1.0.so.1"
conflicts=nyxt

post_install() {
	vlicense licenses/ASSET-LICENSE
	vlicense licenses/SOURCE-LICENSE
}

next_package() {
	depends="nyxt"
	short_desc+=" (transitional dummy package)"
	metapackage=yes
}
