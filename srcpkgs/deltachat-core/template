# Template file for 'deltachat-core'
pkgname=deltachat-core
version=2.18.0
revision=1
#archs="i686 x86_64"
#build_wrksrc=
build_style=cargo
#configure_args=""
#make_build_args=""
#make_install_args=""
#conf_files=""
#make_dirs="/var/log/dir 0755 root root"
hostmakedepends="pkg-config"
makedepends="openssl-devel sqlcipher-devel"
depends=""
short_desc="Chatmail Rust Core library"
maintainer="zenobit <zenobit@disroot.org>"
license="GPL-3.0-or-later"
homepage="https://github.com/chatmail/core"
#changelog=""
distfiles="https://github.com/chatmail/core/archive/refs/tags/v${version}.tar.gz"
checksum=6194a1072d09638a66c77b1bc9188425181081678c9a6f41aae1a2d0f3908269
make_check=no # 1 test fail: thread 'tools::tools_tests::test_maybe_warn_on_outdated' panicked at src/tools/tools_tests.rs:449:5:
#assertion `left == right` failed
#  left: 1
# right: 0

export RUST_BACKTRACE=1

do_check() {
	cargo test -- --test-threads 1
}