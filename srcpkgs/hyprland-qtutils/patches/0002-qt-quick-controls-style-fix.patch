From 629b15c19fa4082e4ce6be09fdb89e8c3312aed7 Mon Sep 17 00:00:00 2001
From: Blaadick <123119046+Blaadick@users.noreply.github.com>
Date: Sun, 28 Sep 2025 20:23:48 +0300
Subject: [PATCH] core: Custom QT_QUICK_CONTROLS_STYLE fix (#20)

---
 .gitignore                         |  1 +
 utils/dialog/CMakeLists.txt        |  2 +-
 utils/dialog/main.cpp              | 14 +++++++-------
 utils/donate-screen/CMakeLists.txt |  2 +-
 utils/donate-screen/main.cpp       | 13 ++++++-------
 utils/update-screen/CMakeLists.txt |  2 +-
 utils/update-screen/main.cpp       | 16 ++++++++--------
 7 files changed, 25 insertions(+), 25 deletions(-)

diff --git a/.gitignore b/.gitignore
index dad7914..09cd1fe 100644
--- a/.gitignore
+++ b/.gitignore
@@ -34,6 +34,7 @@
 build/
 .cache/
 .vscode/
+.idea/
 
 # nix
 result*
diff --git a/utils/dialog/CMakeLists.txt b/utils/dialog/CMakeLists.txt
index c3a5915..e0f6e28 100644
--- a/utils/dialog/CMakeLists.txt
+++ b/utils/dialog/CMakeLists.txt
@@ -24,7 +24,7 @@ qt_add_qml_module(hyprland-dialog
 )
 
 target_link_libraries(hyprland-dialog PRIVATE
-    Qt6::Widgets Qt6::QuickControls2 Qt6::WaylandClientPrivate PkgConfig::hyprutils
+    Qt6::Quick Qt6::QuickControls2 Qt6::WaylandClientPrivate PkgConfig::hyprutils
 )
 
 
diff --git a/utils/dialog/main.cpp b/utils/dialog/main.cpp
index 7fd3c75..9f916ae 100644
--- a/utils/dialog/main.cpp
+++ b/utils/dialog/main.cpp
@@ -1,11 +1,11 @@
 #include "Dialog.hpp"
-#include <hyprutils/string/VarList.hpp>
-#include <print>
-#include <qapplication.h>
-#include <qqmlapplicationengine.h>
-#include <qquickstyle.h>
-#include <qtenvironmentvariables.h>
+#include <QGuiApplication>
+#include <QQmlApplicationEngine>
 #include <QQmlContext>
+#include <QQuickStyle>
+#include <QtEnvironmentVariables>
+#include <print>
+#include <hyprutils/string/VarList.hpp>
 
 using namespace Hyprutils::String;
 
@@ -75,7 +75,7 @@ int main(int argc, char* argv[]) {
         return 1;
     }
 
-    QApplication app(argc, argv);
+    QGuiApplication app(argc, argv);
     app.setApplicationName(appTitle.isEmpty() ? dialog->title : appTitle);
 
     if (qEnvironmentVariableIsEmpty("QT_QUICK_CONTROLS_STYLE"))
diff --git a/utils/donate-screen/CMakeLists.txt b/utils/donate-screen/CMakeLists.txt
index a1189ff..84fe647 100644
--- a/utils/donate-screen/CMakeLists.txt
+++ b/utils/donate-screen/CMakeLists.txt
@@ -30,7 +30,7 @@ qt_add_resources(hyprland-donate-screen "assets"
 )
 
 target_link_libraries(hyprland-donate-screen PRIVATE
-    Qt6::Widgets Qt6::QuickControls2 Qt6::WaylandClientPrivate PkgConfig::hyprutils
+    Qt6::Quick Qt6::QuickControls2 Qt6::WaylandClientPrivate PkgConfig::hyprutils
 )
 
 
diff --git a/utils/donate-screen/main.cpp b/utils/donate-screen/main.cpp
index 48f8ca1..1e4025e 100644
--- a/utils/donate-screen/main.cpp
+++ b/utils/donate-screen/main.cpp
@@ -1,11 +1,10 @@
 #include "DonateScreen.hpp"
-#include <hyprutils/string/VarList.hpp>
-#include <print>
-#include <qapplication.h>
-#include <qqmlapplicationengine.h>
-#include <qquickstyle.h>
-#include <qtenvironmentvariables.h>
+#include <QGuiApplication>
+#include <QQmlApplicationEngine>
 #include <QQmlContext>
+#include <QQuickStyle>
+#include <QtEnvironmentVariables>
+#include <hyprutils/string/VarList.hpp>
 
 using namespace Hyprutils::String;
 
@@ -15,7 +14,7 @@ int main(int argc, char* argv[]) {
 
     auto dialog = new CDonateScreen();
 
-    QApplication app(argc, argv);
+    QGuiApplication app(argc, argv);
     app.setApplicationName("Support Hyprland");
     app.setApplicationDisplayName("Support Hyprland");
 
diff --git a/utils/update-screen/CMakeLists.txt b/utils/update-screen/CMakeLists.txt
index 78ccab2..2ebad6d 100644
--- a/utils/update-screen/CMakeLists.txt
+++ b/utils/update-screen/CMakeLists.txt
@@ -32,7 +32,7 @@ qt_add_resources(hyprland-update-screen "assets"
 )
 
 target_link_libraries(hyprland-update-screen PRIVATE
-    Qt6::Widgets Qt6::QuickControls2 Qt6::WaylandClientPrivate PkgConfig::hyprutils
+    Qt6::Quick Qt6::QuickControls2 Qt6::WaylandClientPrivate PkgConfig::hyprutils
 )
 
 
diff --git a/utils/update-screen/main.cpp b/utils/update-screen/main.cpp
index 6885efa..406cdbc 100644
--- a/utils/update-screen/main.cpp
+++ b/utils/update-screen/main.cpp
@@ -1,12 +1,12 @@
+#include "Dialog.hpp"
 #include "UpdateScreen.hpp"
-#include <hyprutils/string/VarList.hpp>
-#include <print>
-#include <qapplication.h>
-#include <qqmlapplicationengine.h>
-#include <qquickstyle.h>
-#include <qtenvironmentvariables.h>
+#include <QGuiApplication>
+#include <QQmlApplicationEngine>
 #include <QQmlContext>
-#include "Dialog.hpp"
+#include <QQuickStyle>
+#include <QtEnvironmentVariables>
+#include <print>
+#include <hyprutils/string/VarList.hpp>
 
 using namespace Hyprutils::String;
 
@@ -40,7 +40,7 @@ int main(int argc, char* argv[]) {
         return 1;
     }
 
-    QApplication app(argc, argv);
+    QGuiApplication app(argc, argv);
     app.setApplicationName("Hyprland Updated!");
     app.setApplicationDisplayName("Hyprland Updated");


